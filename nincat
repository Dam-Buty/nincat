#!/usr/bin/env sh
#
# DESCRIPTION:
#   This a simple script that loads an ASCII art
#   in the origin path of this script.
#
#   It will look for art that can be loaded in
#   the terminal size. So I do recommend you to have multiple arts.
#
#   If you want nincat to print faster, then just use a POSIX-compliant
#   shell, I do recommend dash (which as 4x faster than bash).
#
# NOTE:
#   This is heavily inspired by shell-colors-scripts project made by DT
#   His video about shell-colors-scripts:
#     https://www.youtube.com/watch?v=8Z1OKN6TgxI
#
#   Filenames are made in this format:
#     <name-of-art> <rows-size-of-art> <columns-size-of-art>
#   Yes, it does contain spaces.
#   With lolcat support:
#   <name-of-art>_lolcat <rows-size-of-art> <columns-size-of-art>
#
#   In this code on the awk call, there is a math operation with rows and '- 1'
#   This one is the prompt of your shell, if it's two lines, then you should 
#   change to '- 2'. Honestly, I don't see necessity of using two lines to a 
#   prompt, so for now, it will be altered manually and not a variable or 
#   argument to this script.
#   
# FEATURES:
#   + A single run for every command
#   + Fast and lightweight (2 SLOC : lmao)
#   + Self adapt with the terminal size to print only ASCII arts that fit
#   + Supports lolcart arts (if there's programs like lolcat, we can support it,
#     too :)
#   +
# 
# DEPENDENCIES:
#   + fcat (recommended)
#     - Faster implementation of cat
#   + lolcat (optional)
#     - Please, use the faster implentation (https://github.com/jaseg/lolcat)
#     - If you want to, you can disable this dependency by
#       just removing the 'lolcat' folder in 'ascii_arts' in the root.
#   
# MAINTAINER:
#   BeyondMagic : 2021- : koetemagie@gmail.com
#
# GPL3 Â© 2021 : github.com/BeyondMagic/nincat

# Select a art
selected="$(find ""$(cd -- "$(dirname "$0")" >/dev/null 2>&1 && pwd -P)"/ascii_arts/" -type f | \
  shuf | awk "(\$2 <= $(($(tput lines) - 1))) && (\$3 <= $(tput cols))" | head -n1)"

# If it did find a art, then print it
[ "$selected" ] && printf '%b' "$(fcat "$selected")"  || exit 0
